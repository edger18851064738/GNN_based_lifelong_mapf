<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基于RHCR的非结构化环境Lifelong MAPF系统</title>
    <style>
        body {
            font-family: 'Times New Roman', 'SimSun', serif;
            margin: 0;
            padding: 20px;
            background: #f8f8f8;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border: 1px solid #ddd;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .title {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #000;
            margin-bottom: 8px;
            padding-bottom: 15px;
            border-bottom: 2px solid #000;
        }
        
        .subtitle {
            text-align: center;
            font-size: 16px;
            color: #555;
            margin-bottom: 30px;
            font-style: italic;
        }
        
        .section {
            margin: 30px 0;
            border: 1px solid #999;
            position: relative;
        }
        
        .section-title {
            position: absolute;
            top: -12px;
            left: 20px;
            background: white;
            padding: 0 10px;
            font-weight: bold;
            font-size: 16px;
            color: #000;
        }
        
        .section-content {
            padding: 25px;
        }
        
        .subsection {
            background: #f9f9f9;
            border: 1px solid #ccc;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .subsection:last-child {
            margin-bottom: 0;
        }
        
        .subsection-title {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 12px;
            color: #000;
        }
        
        .subsection-content {
            font-size: 12px;
            line-height: 1.5;
            color: #555;
            text-align: justify;
        }
        
        .highlight-box {
            background: #e8e8e8;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #666;
        }
        
        .highlight-title {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 8px;
            color: #333;
        }
        
        .mathematical-formulation {
            background: #f0f0f0;
            border: 1px solid #999;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 11px;
        }
        
        .three-layer-architecture {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .layer {
            border: 1px solid #666;
            background: white;
        }
        
        .layer-header {
            background: #e8e8e8;
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #666;
        }
        
        .layer-title {
            font-weight: bold;
            font-size: 13px;
            margin-bottom: 5px;
            color: #000;
        }
        
        .layer-subtitle {
            font-size: 11px;
            color: #666;
            font-style: italic;
        }
        
        .layer-content {
            padding: 15px;
        }
        
        .layer-modules {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .layer-modules li {
            padding: 8px 0;
            border-bottom: 1px dotted #ccc;
            font-size: 11px;
        }
        
        .layer-modules li:last-child {
            border-bottom: none;
        }
        
        .module-name {
            font-weight: bold;
            color: #333;
        }
        
        .module-desc {
            color: #666;
            margin-top: 3px;
        }
        
        .innovation-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .innovation-box {
            background: white;
            border: 1px solid #ccc;
            padding: 15px;
        }
        
        .innovation-box-title {
            font-weight: bold;
            font-size: 13px;
            margin-bottom: 10px;
            color: #000;
        }
        
        .tech-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .tech-list li {
            padding: 4px 0;
            font-size: 11px;
            color: #555;
        }
        
        .tech-list li::before {
            content: "▸ ";
            color: #333;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 11px;
        }
        
        .comparison-table th,
        .comparison-table td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }
        
        .comparison-table th {
            background: #e8e8e8;
            font-weight: bold;
        }
        
        .literature-ref {
            background: #f0f8ff;
            border-left: 3px solid #4682b4;
            padding: 10px;
            margin: 10px 0;
            font-size: 11px;
            color: #333;
        }
        
        .technical-analysis {
            background: #fafafa;
            border: 1px solid #ddd;
            padding: 15px;
            margin: 15px 0;
        }
        
        .analysis-title {
            font-weight: bold;
            font-size: 13px;
            margin-bottom: 10px;
            color: #000;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
        }
        
        .challenge-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .challenge-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-left: 4px solid #fdcb6e;
            padding: 12px;
        }
        
        .challenge-title {
            font-weight: bold;
            font-size: 12px;
            margin-bottom: 8px;
            color: #000;
        }
        
        .significance-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 18px;
            margin-top: 20px;
        }
        
        .significance-section {
            background: #f9f9f9;
            border: 1px solid #ccc;
            padding: 18px;
            min-height: 120px;
            display: flex;
            flex-direction: column;
        }
        
        .significance-theory {
            border-left: 4px solid #2196f3;
        }
        
        .significance-practical {
            border-left: 4px solid #4caf50;
        }
        
        .significance-technical {
            border-left: 4px solid #ff9800;
        }
        
        .significance-future {
            border-left: 4px solid #9c27b0;
        }
        
        .significance-section-title {
            font-weight: bold;
            font-size: 13px;
            margin-bottom: 12px;
            color: #000;
        }
        
        .significance-text {
            font-size: 12px;
            line-height: 1.5;
            color: #555;
            text-align: justify;
            flex: 1;
        }

        .method-flowchart {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .flowchart-title {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 15px;
            color: #000;
        }

        .flowchart-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .flowchart-step {
            background: white;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            flex: 1;
            min-width: 120px;
            font-size: 11px;
        }

        .flowchart-arrow {
            font-size: 18px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">
            基于RHCR的非结构化环境Lifelong多车协同轨迹规划系统
        </div>
        <div class="subtitle">
            RHCR-based Lifelong Multi-Agent Path Finding System in Unstructured Environments<br>
            ——面向持续车辆流的滚动时域规划与吞吐量优化
        </div>
        
        <!-- 1. Introduction and Motivation -->
        <div class="section">
            <div class="section-title">1. 引言与研究动机</div>
            <div class="section-content">
                <div class="subsection">
                    <div class="subsection-title">1.1 研究背景与问题定位</div>
                    <div class="subsection-content">
                        <div class="technical-analysis">
                            <div class="analysis-title">核心问题界定</div>
                            <strong>One-shot MAPF的局限性：</strong>
                            传统多智能体路径规划假设固定的智能体集合和预定义的目标位置，
                            智能体到达目标后即停止，无法处理持续到达的任务流。<br><br>
                            
                            <strong>Lifelong MAPF的现实需求：</strong>
                            在露天矿、港口、仓储等工业场景中，车辆需要持续处理运输任务，
                            形成"装载-运输-卸载-返回"的循环作业模式，要求系统具备lifelong调度能力。<br><br>
                            
                            <strong>非结构化环境的挑战：</strong>
                            现有lifelong MAPF方法主要针对结构化网格环境，
                            而真实工业环境具有不规则边界、复杂约束、动态障碍物等特征。
                        </div>
                        
                        <div class="literature-ref">
                            <strong>技术基础：</strong>本研究基于Xu et al. (2024)在IEEE T-ITS发表的工作，
                            该研究提出了面向非结构化环境的V-Hybrid A*算法，通过中心化决策-分布式规划框架
                            解决了非结构化冲突区域的多车协同问题，但仅限于one-shot场景。
                        </div>
                        
                        <div class="challenge-grid">
                            <div class="challenge-box">
                                <div class="challenge-title">理论挑战</div>
                                如何将V-Hybrid A*从one-shot扩展到lifelong场景？如何保持算法的理论保证？
                            </div>
                            
                            <div class="challenge-box">
                                <div class="challenge-title">工程挑战</div>
                                如何在400ms实时性约束下处理持续车辆流？如何实现系统吞吐量最大化？
                            </div>
                            
                            <div class="challenge-box">
                                <div class="challenge-title">环境适应挑战</div>
                                如何处理非结构化环境中的复杂约束和动态变化？
                            </div>
                            
                            <div class="challenge-box">
                                <div class="challenge-title">可扩展性挑战</div>
                                如何在大规模车辆场景下保持高效的调度性能？
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">1.2 技术路线与创新贡献</div>
                    <div class="subsection-content">
                        <div class="innovation-grid">
                            <div class="innovation-box">
                                <div class="innovation-box-title">核心技术路线</div>
                                <ul class="tech-list">
                                    <li><strong>RHCR框架：</strong>滚动时域分解lifelong问题为windowed MAPF序列</li>
                                    <li><strong>V-Hybrid A*内核：</strong>窗口内高质量轨迹规划</li>
                                    <li><strong>动态优先级管理：</strong>借鉴PIBT思想的在线优先级分配</li>
                                    <li><strong>吞吐量优化：</strong>多目标调度策略设计</li>
                                </ul>
                            </div>
                            
                            <div class="innovation-box">
                                <div class="innovation-box-title">主要创新贡献</div>
                                <ul class="tech-list">
                                    <li><strong>首次将V-Hybrid A*扩展到lifelong场景</strong></li>
                                    <li><strong>设计非结构化环境的RHCR适配机制</strong></li>
                                    <li><strong>提出吞吐量导向的优先级管理策略</strong></li>
                                    <li><strong>建立完整的工程实现框架</strong></li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="technical-analysis">
                            <div class="analysis-title">技术定位与优势</div>
                            <strong>相对于现有lifelong MAPF的优势：</strong>
                            现有方法如PIBT、RHCR+CBS主要针对网格环境，本研究首次将高质量的V-Hybrid A*算法
                            应用于lifelong场景，在非结构化环境下具有显著优势。<br><br>
                            
                            <strong>相对于原V-Hybrid A*的扩展：</strong>
                            原算法仅处理批次化的静态车辆集合，本研究通过RHCR框架实现了对持续车辆流的处理，
                            从根本上解决了lifelong调度问题。
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 2. Related Work -->
        <div class="section">
            <div class="section-title">2. 相关工作</div>
            <div class="section-content">
                <div class="subsection">
                    <div class="subsection-title">2.1 Lifelong MAPF研究现状</div>
                    <div class="subsection-content">
                        <div class="literature-ref">
                            <strong>RHCR理论基础：</strong>Li et al. (2021)提出的Rolling-Horizon Collision Resolution框架
                            将lifelong MAPF分解为一系列windowed MAPF子问题，每h个时间步调用窗口化求解器，
                            处理接下来w个时间步的规划问题。该框架成功支持了1000个智能体的大规模调度。
                        </div>
                        
                        <div class="literature-ref">
                            <strong>PIBT优先级机制：</strong>Okumura et al. (2022)的Priority Inheritance with Backtracking算法
                            通过优先级继承和回溯机制实现分布式lifelong规划，在双连通图上具有完整性保证，
                            为大规模实时调度提供了有效解决方案。
                        </div>
                        
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>算法类别</th>
                                    <th>代表方法</th>
                                    <th>核心机制</th>
                                    <th>适用环境</th>
                                    <th>可扩展性</th>
                                    <th>解质量</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>分解框架</td>
                                    <td>RHCR</td>
                                    <td>滚动时域窗口</td>
                                    <td>网格图</td>
                                    <td>1000个智能体</td>
                                    <td>高</td>
                                </tr>
                                <tr>
                                    <td>规则方法</td>
                                    <td>PIBT</td>
                                    <td>优先级继承</td>
                                    <td>双连通图</td>
                                    <td>数百个智能体</td>
                                    <td>中等</td>
                                </tr>
                                <tr>
                                    <td>学习方法</td>
                                    <td>PRIMAL2</td>
                                    <td>分布式强化学习</td>
                                    <td>网格图</td>
                                    <td>中等规模</td>
                                    <td>中等</td>
                                </tr>
                                <tr>
                                    <td><strong>本研究</strong></td>
                                    <td><strong>RHCR+V-Hybrid A*</strong></td>
                                    <td><strong>时域分解+轨迹优化</strong></td>
                                    <td><strong>非结构化</strong></td>
                                    <td><strong>待验证</strong></td>
                                    <td><strong>高</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">2.2 V-Hybrid A*算法原理</div>
                    <div class="subsection-content">
                        <div class="technical-analysis">
                            <div class="analysis-title">V-Hybrid A*核心技术特征</div>
                            <strong>四维状态空间搜索：</strong>
                            扩展传统Hybrid A*的(x, y, θ)状态空间为(x, y, θ, v, t)，
                            能够处理速度连续性、加减速约束和时间维度的复杂约束。<br><br>
                            
                            <strong>时空地图建模：</strong>
                            将连续的三维空间(x, y, t)离散化为资源块，支持动态障碍物和车辆间冲突的精确建模，
                            通过资源块分配避免车辆间的时空冲突。<br><br>
                            
                            <strong>两阶段轨迹优化：</strong>
                            分为路径优化和速度优化两个阶段，确保生成轨迹满足车辆动力学约束、
                            平滑性要求和舒适性标准。
                        </div>
                        
                        <div class="mathematical-formulation">
                            V-Hybrid A*状态转移方程：
                            
                            状态定义：
                            state = (x, y, θ, v, t)
                            其中 (x,y) 为位置，θ 为航向角，v 为速度，t 为时间
                            
                            状态转移：
                            v_{n+1} = v_n + a_i * Δt
                            Δd = v_{n+1} * Δt  
                            Δθ = (Δd / L) * tan(δ_j)
                            x_{n+1} = x_n + Δd * cos(θ_n + Δθ/2)
                            y_{n+1} = y_n + Δd * sin(θ_n + Δθ/2)
                            t_{n+1} = t_n + Δt
                            
                            约束条件：
                            v_min ≤ v_{n+1} ≤ v_max
                            a_min ≤ a_i ≤ a_max
                            |δ_j| ≤ δ_max
                            collision_free(state_{n+1})
                            
                            评估函数：
                            f(n) = g(n) + h(n)
                            g(n) = path_cost + speed_penalty + direction_penalty
                            h(n) = euclidean_distance + time_heuristic
                        </div>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">2.3 技术融合的理论基础</div>
                    <div class="subsection-content">
                        <div class="literature-ref">
                            <strong>RHCR与V-Hybrid A*的契合性：</strong>RHCR设计为通用框架，可与任意MAPF求解器结合。
                            V-Hybrid A*作为完整轨迹规划算法，其规划域与RHCR的时间窗口机制天然匹配，
                            能够充分发挥两者的优势。
                        </div>
                        
                        <div class="technical-analysis">
                            <div class="analysis-title">算法融合的技术优势</div>
                            <strong>理论保证继承：</strong>
                            RHCR框架继承内核求解器的理论性质，V-Hybrid A*的路径可行性和连续性保证
                            可以传递到整个lifelong系统中。<br><br>
                            
                            <strong>计算复杂度平衡：</strong>
                            RHCR的窗口分解机制将lifelong问题的无限时域复杂度转化为有限窗口的多项式复杂度，
                            使V-Hybrid A*在lifelong场景下的应用成为可能。<br><br>
                            
                            <strong>质量与效率权衡：</strong>
                            V-Hybrid A*提供高质量轨迹规划能力，RHCR确保实时性能，
                            两者结合实现了解质量与计算效率的最佳平衡。
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 3. Problem Formulation -->
        <div class="section">
            <div class="section-title">3. 问题形式化</div>
            <div class="section-content">
                <div class="subsection">
                    <div class="subsection-title">3.1 非结构化环境Lifelong MAPF定义</div>
                    <div class="subsection-content">
                        <div class="mathematical-formulation">
                            问题形式化定义：
                            
                            输入：
                            - 非结构化环境：E = (PointCloud, StaticObstacles, DynamicObstacles)
                            - 冲突区域：ConflictZone ⊂ E (局部化假设)
                            - 车辆类型：VehicleSpecs = {size, dynamics, constraints}
                            - 任务流：TaskStream = {task₁, task₂, ...} (无限序列)
                              其中 task_i = (vehicle_id, goal_location, arrival_time, deadline, priority)
                            
                            输出：
                            - 时空轨迹：Π(t) = {π₁(t), π₂(t), ..., πₙ(t)} for t ∈ [0, ∞)
                            - 其中 π_i(t) = {(x_i(τ), y_i(τ), θ_i(τ), v_i(τ)) | τ ∈ [t, t+T_i]}
                            
                            Lifelong约束：
                            1. 持续性：agents continuously engaged with new tasks
                            2. 在线性：real-time decision making with limited computation time
                            3. 完整性：all feasible tasks eventually completed
                            4. 安全性：collision_free(Π(t)) ∀t
                            5. 动力学可行性：kinodynamic_feasible(π_i(t)) ∀i,t
                            
                            优化目标：
                            maximize: Throughput = completed_tasks / time_period
                            subject to: Safety ∧ RealTime ∧ ResourceConstraints ∧ FairnessConstraints
                        </div>
                        
                        <div class="technical-analysis">
                            <div class="analysis-title">问题复杂性分析</div>
                            <strong>计算复杂性：</strong>
                            非结构化环境下的lifelong MAPF属于PSPACE-hard问题类，
                            连续空间、动态约束、时间维度的加入进一步增加了问题的复杂性。<br><br>
                            
                            <strong>实时性挑战：</strong>
                            工业应用要求每个决策周期不超过400ms，这要求算法在有限时间内
                            对持续变化的系统状态做出高质量决策。<br><br>
                            
                            <strong>非结构化环境特殊性：</strong>
                            与网格图不同，非结构化环境需要处理连续空间的路径规划、
                            复杂几何约束、动态环境变化等挑战。
                        </div>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">3.2 RHCR-V-Hybrid A*融合模型</div>
                    <div class="subsection-content">
                        <div class="mathematical-formulation">
                            RHCR-V-Hybrid A*数学模型：
                            
                            RHCR时间窗口分解：
                            LifelongMAPF = ⋃_{k=0}^∞ WindowedMAPF(k⋅h, w)
                            
                            其中：
                            - h：执行步长 (simulation window)
                            - w：规划窗口大小 (planning window)  
                            - WindowedMAPF(t, w)：时间[t, t+w]内的MAPF子问题
                            
                            V-Hybrid A*窗口求解：
                            ∀ WindowedMAPF(t, w):
                            Π_{window}(t) = VHybridAStar(
                                agents_active(t), 
                                SpatioTemporalMap[t:t+w],
                                priorities(t)
                            )
                            
                            执行与推进策略：
                            execute(Π_{window}[t:t+h])
                            preserve(Π_{window}[t+h:t+w]) as warm_start
                            advance_time(h)
                            
                            连续性保证：
                            ∀i, ∀τ ∈ [t+h-ε, t+h+ε]: 
                            ||π_i(τ⁻) - π_i(τ⁺)|| < δ (position continuity)
                            ||v_i(τ⁻) - v_i(τ⁺)|| < δ_v (velocity continuity)
                        </div>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">3.3 吞吐量优化目标函数</div>
                    <div class="subsection-content">
                        <div class="mathematical-formulation">
                            多目标吞吐量优化模型：
                            
                            主要目标函数：
                            maximize J = α₁⋅Throughput + α₂⋅Efficiency + α₃⋅Fairness
                            
                            其中：
                            Throughput = Σ_{t=0}^T completed_tasks(t) / T
                            Efficiency = Σ_i useful_travel_distance_i / total_travel_distance_i  
                            Fairness = 1 - Var(waiting_times) / Mean(waiting_times)²
                            
                            约束条件：
                            - ∀t: decision_time(t) ≤ 400ms (实时性约束)
                            - ∀i,j,t: safety_distance(π_i(t), π_j(t)) ≥ d_min (安全约束)
                            - ∀i,t: energy_consumption_i(t) ≤ budget_i (资源约束)
                            - ∀i: max_waiting_time_i ≤ W_max (公平性约束)
                            
                            动态权重调整：
                            α(t) = adaptation_function(system_state(t), performance_history)
                            根据系统当前状态和历史性能动态调整目标权重
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 4. Proposed Method -->
        <div class="section">
            <div class="section-title">4. 核心方法设计</div>
            <div class="section-content">
                <div class="subsection">
                    <div class="subsection-title">4.1 RHCR-V-Hybrid A*总体架构</div>
                    <div class="subsection-content">
                        <div class="method-flowchart">
                            <div class="flowchart-title">RHCR-V-Hybrid A*算法流程</div>
                            <div class="flowchart-steps">
                                <div class="flowchart-step">
                                    <strong>时间窗口管理</strong><br>
                                    构建[t, t+w]规划窗口<br>
                                    收集活跃车辆和任务
                                </div>
                                <div class="flowchart-arrow">→</div>
                                <div class="flowchart-step">
                                    <strong>优先级分配</strong><br>
                                    动态优先级计算<br>
                                    冲突解耦决策
                                </div>
                                <div class="flowchart-arrow">→</div>
                                <div class="flowchart-step">
                                    <strong>V-Hybrid A*规划</strong><br>
                                    时空轨迹搜索<br>
                                    轨迹优化处理
                                </div>
                                <div class="flowchart-arrow">→</div>
                                <div class="flowchart-step">
                                    <strong>执行与推进</strong><br>
                                    执行前h步轨迹<br>
                                    时间窗口推进
                                </div>
                            </div>
                        </div>
                        
                        <div class="mathematical-formulation">
                            RHCR-V-Hybrid A*核心算法：
                            
                            Algorithm: LifelongRHCRVHybridAStar
                            Input: environment E, task_stream T, vehicles A
                            Output: trajectory_sequence Π
                            
                            1: Initialize system_state, rhcr_manager(w, h), priority_manager
                            2: while system.is_active() do
                            3:    current_time ← get_current_time()
                            4:    
                            5:    // RHCR Window Management
                            6:    window ← rhcr_manager.create_window(current_time, w)
                            7:    active_agents ← get_agents_in_window(window)
                            8:    update_agent_states(active_agents, current_time)
                            9:    handle_new_arrivals_and_departures(current_time)
                            10:   
                            11:   // Dynamic Priority Assignment
                            12:   priorities ← priority_manager.assign_priorities(
                            13:       active_agents, current_time, system_load
                            14:   )
                            15:   
                            16:   // V-Hybrid A* Planning
                            17:   spatiotemporal_map ← build_window_map(window, active_agents)
                            18:   trajectories ← vhybrid_astar_planning(
                            19:       active_agents, spatiotemporal_map, priorities
                            20:   )
                            21:   
                            22:   // Trajectory Optimization
                            23:   optimized_trajectories ← trajectory_optimization(trajectories)
                            24:   
                            25:   // Execute and Advance  
                            26:   execute_trajectories(optimized_trajectories[0:h])
                            27:   preserve_future_plan(optimized_trajectories[h:w])
                            28:   rhcr_manager.advance_time(h)
                            29:   
                            30:   // Performance Monitoring
                            31:   update_throughput_metrics()
                            32:   adapt_system_parameters()
                        </div>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">4.2 动态优先级管理机制</div>
                    <div class="subsection-content">
                        <div class="technical-analysis">
                            <div class="analysis-title">PIBT启发的优先级策略</div>
                            <strong>多因子优先级计算：</strong>
                            借鉴PIBT的优先级思想，综合考虑到达时间、等待时间、任务紧急度、
                            路径复杂度、系统负载等多个因素，动态计算车辆优先级。<br><br>
                            
                            <strong>优先级继承机制：</strong>
                            当高优先级车辆被低优先级车辆阻塞时，采用优先级继承机制，
                            确保系统的无死锁性和效率最大化。<br><br>
                            
                            <strong>负载感知调整：</strong>
                            根据系统当前负载状态，动态调整优先级计算权重，
                            在高负载时优先考虑系统吞吐量，在低负载时注重公平性。
                        </div>
                        
                        <div class="mathematical-formulation">
                            动态优先级计算算法：
                            
                            优先级计算公式：
                            priority(agent_i, t) = Σ_j w_j(t) × factor_j(agent_i, t)
                            
                            其中因子包括：
                            factor_arrival = normalize(arrival_time_i, current_time)
                            factor_waiting = min(1.0, (current_time - arrival_time_i) / max_wait)
                            factor_urgency = urgency_score(task_i) 
                            factor_complexity = path_complexity_estimation(agent_i)
                            factor_load = system_load_balancing_score(agent_i, t)
                            
                            权重自适应调整：
                            w(t+1) = w(t) + η × performance_gradient(w(t))
                            
                            其中performance_gradient基于：
                            - 系统吞吐量变化率
                            - 平均等待时间变化率  
                            - 公平性指标变化率
                            
                            优先级继承规则：
                            if agent_i blocked by agent_j and priority(i) > priority(j):
                                priority(j) := priority(i)
                                inheritance_chain.append(j)
                                propagate_inheritance(inheritance_chain)
                        </div>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">4.3 窗口边界连续性保证</div>
                    <div class="subsection-content">
                        <div class="technical-analysis">
                            <div class="analysis-title">关键技术挑战</div>
                            <strong>轨迹连续性问题：</strong>
                            RHCR每h步重新规划时，新轨迹必须与之前的轨迹在边界处保持位置、
                            速度、加速度的连续性，避免车辆运动的突变。<br><br>
                            
                            <strong>Warm Start机制：</strong>
                            利用上一窗口的规划结果作为当前窗口的初始解，
                            通过状态传递和约束继承确保规划的连续性和一致性。<br><br>
                            
                            <strong>边界约束处理：</strong>
                            在窗口边界[t+h-ε, t+h+ε]范围内设置软约束，
                            确保新规划轨迹与保留轨迹的平滑连接。
                        </div>
                        
                        <div class="mathematical-formulation">
                            边界连续性保证算法：
                            
                            连续性检查函数：
                            check_continuity(prev_trajectory, new_trajectory, t_boundary):
                                δ_pos = ||pos_prev(t_boundary) - pos_new(t_boundary)||
                                δ_vel = ||vel_prev(t_boundary) - vel_new(t_boundary)||
                                δ_acc = ||acc_prev(t_boundary) - acc_new(t_boundary)||
                                
                                return δ_pos < ε_pos ∧ δ_vel < ε_vel ∧ δ_acc < ε_acc
                            
                            边界平滑函数：
                            smooth_boundary_transition(prev_traj, new_traj, t_boundary):
                                // 三次样条插值确保C²连续性
                                spline_segment = cubic_spline_interpolation(
                                    [pos_prev(t_boundary-ε), pos_prev(t_boundary)],
                                    [pos_new(t_boundary), pos_new(t_boundary+ε)],
                                    boundary_conditions=[vel_constraints, acc_constraints]
                                )
                                return spline_segment
                            
                            Warm Start状态传递：
                            warm_start_state(prev_solution, current_time):
                                for agent in active_agents:
                                    if agent in prev_solution:
                                        initial_state = extract_state(prev_solution, agent, current_time)
                                        initial_trajectory = extract_trajectory_segment(
                                            prev_solution, agent, [current_time, current_time+w]
                                        )
                                    else:
                                        initial_state = current_state(agent)
                                        initial_trajectory = shortest_path_guess(agent)
                                return initial_states, initial_trajectories
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 5. System Architecture -->
        <div class="section">
            <div class="section-title">5. 系统架构设计</div>
            <div class="section-content">
                <div class="subsection">
                    <div class="subsection-title">5.1 分层系统架构</div>
                    <div class="subsection-content">
                        <div class="three-layer-architecture">
                            <div class="layer">
                                <div class="layer-header">
                                    <div class="layer-title">Layer 1: 环境感知与建模</div>
                                    <div class="layer-subtitle">Environment Perception & Modeling</div>
                                </div>
                                <div class="layer-content">
                                    <ul class="layer-modules">
                                        <li>
                                            <div class="module-name">1.1 多传感器数据融合</div>
                                            <div class="module-desc">LiDAR点云处理、摄像头目标检测、GPS定位、IMU姿态估计</div>
                                        </li>
                                        <li>
                                            <div class="module-name">1.2 环境理解与建模</div>
                                            <div class="module-desc">障碍物识别分类、可通行区域提取、动态目标跟踪、地形分析</div>
                                        </li>
                                        <li>
                                            <div class="module-name">1.3 时空地图构建</div>
                                            <div class="module-desc">连续空间离散化、资源块分配、时空冲突建模、约束传递机制</div>
                                        </li>
                                        <li>
                                            <div class="module-name">1.4 动态地图维护</div>
                                            <div class="module-desc">增量式地图更新、版本控制、一致性保证、实时同步</div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="layer">
                                <div class="layer-header">
                                    <div class="layer-title">Layer 2: RHCR核心规划</div>
                                    <div class="layer-subtitle">RHCR Core Planning</div>
                                </div>
                                <div class="layer-content">
                                    <ul class="layer-modules">
                                        <li>
                                            <div class="module-name">2.1 RHCR时间窗口管理</div>
                                            <div class="module-desc">滚动窗口构建、时间推进控制、窗口参数自适应、负载平衡调度</div>
                                        </li>
                                        <li>
                                            <div class="module-name">2.2 动态优先级管理</div>
                                            <div class="module-desc">多因子优先级计算、优先级继承机制、冲突解耦策略、公平性保证</div>
                                        </li>
                                        <li>
                                            <div class="module-name">2.3 V-Hybrid A*轨迹规划</div>
                                            <div class="module-desc">四维状态搜索、时空冲突检测、轨迹生成优化、动力学约束验证</div>
                                        </li>
                                        <li>
                                            <div class="module-name">2.4 边界连续性保证</div>
                                            <div class="module-desc">轨迹连接平滑、Warm Start机制、状态传递、连续性验证</div>
                                        </li>
                                        <li>
                                            <div class="module-name">2.5 实时性能优化</div>
                                            <div class="module-desc">计算时间控制、算法参数调整、近似算法降级、性能监控</div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="layer">
                                <div class="layer-header">
                                    <div class="layer-title">Layer 3: 吞吐量优化调度</div>
                                    <div class="layer-subtitle">Throughput Optimization</div>
                                </div>
                                <div class="layer-content">
                                    <ul class="layer-modules">
                                        <li>
                                            <div class="module-name">3.1 系统负载管理</div>
                                            <div class="module-desc">负载监测评估、进入速率控制、拥堵预测预防、容量动态调整</div>
                                        </li>
                                        <li>
                                            <div class="module-name">3.2 任务调度优化</div>
                                            <div class="module-desc">任务-车辆匹配、截止时间管理、路径负载均衡、资源分配优化</div>
                                        </li>
                                        <li>
                                            <div class="module-name">3.3 多目标权衡决策</div>
                                            <div class="module-desc">吞吐量-公平性权衡、效率-安全性平衡、短期-长期目标协调</div>
                                        </li>
                                        <li>
                                            <div class="module-name">3.4 自适应参数优化</div>
                                            <div class="module-desc">权重在线学习、阈值动态调整、策略选择优化、性能反馈改进</div>
                                        </li>
                                        <li>
                                            <div class="module-name">3.5 应急处理机制</div>
                                            <div class="module-desc">故障检测响应、降级运行模式、安全停车策略、系统恢复机制</div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">5.2 关键模块设计</div>
                    <div class="subsection-content">
                        <div class="mathematical-formulation">
                            核心模块实现框架：
                            
                            class LifelongRHCRSystem:
                                def __init__(self):
                                    self.rhcr_manager = RHCRManager(w=10, h=3)
                                    self.vhybrid_planner = VHybridAStarPlanner()
                                    self.priority_manager = DynamicPriorityManager()
                                    self.throughput_optimizer = ThroughputOptimizer()
                                    self.environment_model = EnvironmentModel()
                                    
                                def planning_cycle(self):
                                    # 1. 环境状态更新
                                    self.environment_model.update()
                                    
                                    # 2. RHCR窗口管理
                                    window = self.rhcr_manager.get_current_window()
                                    
                                    # 3. 优先级分配
                                    priorities = self.priority_manager.assign_priorities(window)
                                    
                                    # 4. V-Hybrid A*规划
                                    trajectories = self.vhybrid_planner.plan(window, priorities)
                                    
                                    # 5. 吞吐量优化
                                    optimized_plan = self.throughput_optimizer.optimize(trajectories)
                                    
                                    # 6. 执行与推进
                                    self.execute_and_advance(optimized_plan)
                                    
                                    return optimized_plan
                            
                            class RHCRManager:
                                def __init__(self, w, h):
                                    self.planning_window = w
                                    self.simulation_step = h
                                    self.current_time = 0
                                    self.preserved_plans = {}
                                    
                                def create_window(self, current_time, adaptive=True):
                                    if adaptive:
                                        w_adapted = self.adapt_window_size()
                                    else:
                                        w_adapted = self.planning_window
                                    
                                    return PlanningWindow(
                                        start_time=current_time,
                                        end_time=current_time + w_adapted,
                                        active_agents=self.get_active_agents(current_time),
                                        preserved_plans=self.preserved_plans
                                    )
                                    
                                def advance_time(self, step_size):
                                    self.current_time += step_size
                                    self.update_preserved_plans()
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 6. Experimental Design -->
        <div class="section">
            <div class="section-title">6. 实验设计与评估</div>
            <div class="section-content">
                <div class="subsection">
                    <div class="subsection-title">6.1 实验环境与基准设置</div>
                    <div class="subsection-content">
                        <div class="innovation-grid">
                            <div class="innovation-box">
                                <div class="innovation-box-title">仿真实验环境</div>
                                <ul class="tech-list">
                                    <li><strong>标准数据集：</strong>MovingAI benchmark, MAPF竞赛数据集</li>
                                    <li><strong>工业场景：</strong>露天矿点云数据、港口装卸区、仓储分拣中心</li>
                                    <li><strong>车辆建模：</strong>重载矿车、AGV、叉车等多种规格</li>
                                    <li><strong>任务生成：</strong>泊松到达过程、多优先级任务混合</li>
                                </ul>
                            </div>
                            
                            <div class="innovation-box">
                                <div class="innovation-box-title">对比基准选择</div>
                                <ul class="tech-list">
                                    <li><strong>Lifelong基准：</strong>RHCR+CBS, RHCR+EECBS, PIBT</li>
                                    <li><strong>学习方法：</strong>PRIMAL2, WPPL (implementation baseline)</li>
                                    <li><strong>原算法：</strong>One-shot V-Hybrid A* (导师baseline)</li>
                                    <li><strong>工业方法：</strong>基于规则的调度、集中式MPC</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="technical-analysis">
                            <div class="analysis-title">关键研究问题</div>
                            <strong>RQ1: Lifelong扩展有效性</strong><br>
                            相比原V-Hybrid A*算法，lifelong扩展在处理持续任务流时的性能提升？<br><br>
                            
                            <strong>RQ2: RHCR框架适配效果</strong><br>
                            RHCR框架与V-Hybrid A*结合的效果相比其他lifelong方法的优势？<br><br>
                            
                            <strong>RQ3: 非结构化环境优势</strong><br>
                            在非结构化环境中的表现相比网格环境的lifelong方法的改进？<br><br>
                            
                            <strong>RQ4: 吞吐量优化效果</strong><br>
                            动态优先级和吞吐量优化策略对系统性能的具体影响？
                        </div>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">6.2 性能评估指标体系</div>
                    <div class="subsection-content">
                        <div class="mathematical-formulation">
                            综合性能评估指标：
                            
                            吞吐量指标：
                            - Throughput = completed_tasks / total_simulation_time
                            - Service_Rate = vehicles_processed / hour  
                            - System_Utilization = active_planning_time / total_time
                            
                            效率指标：
                            - Average_Service_Time = Σ(completion - arrival) / num_tasks
                            - Average_Travel_Distance = Σ(actual_distance) / num_vehicles
                            - Path_Quality_Ratio = optimal_distance / actual_distance
                            
                            实时性指标：
                            - Planning_Time = average_computation_time_per_cycle
                            - Response_Latency = max_planning_time_per_cycle
                            - Real_Time_Success_Rate = cycles_within_deadline / total_cycles
                            
                            公平性指标：
                            - Fairness_Index = (Σw_i)² / (n·Σw_i²) (Jain's Index)
                            - Max_Waiting_Time = max(task_waiting_times)
                            - Starvation_Rate = timeout_tasks / total_tasks
                            
                            安全性指标：
                            - Collision_Rate = collision_events / total_movements
                            - Near_Miss_Rate = near_collision_events / total_interactions
                            - Safety_Distance_Violation_Rate = violations / total_checks
                        </div>
                        
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>实验场景</th>
                                    <th>车辆数量</th>
                                    <th>任务到达率</th>
                                    <th>环境复杂度</th>
                                    <th>重点评估指标</th>
                                    <th>运行时长</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>基础功能验证</td>
                                    <td>10-30</td>
                                    <td>5-15 tasks/min</td>
                                    <td>简单场景</td>
                                    <td>算法正确性、基础性能</td>
                                    <td>30分钟</td>
                                </tr>
                                <tr>
                                    <td>中等规模测试</td>
                                    <td>50-100</td>
                                    <td>20-40 tasks/min</td>
                                    <td>中等复杂度</td>
                                    <td>吞吐量、实时性、解质量</td>
                                    <td>2小时</td>
                                </tr>
                                <tr>
                                    <td>大规模压力测试</td>
                                    <td>200-500</td>
                                    <td>60-120 tasks/min</td>
                                    <td>高复杂度</td>
                                    <td>可扩展性、系统稳定性</td>
                                    <td>8小时</td>
                                </tr>
                                <tr>
                                    <td>长期运行测试</td>
                                    <td>100</td>
                                    <td>30 tasks/min</td>
                                    <td>动态变化</td>
                                    <td>长期稳定性、适应性</td>
                                    <td>48小时</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">6.3 真实场景验证</div>
                    <div class="subsection-content">
                        <div class="literature-ref">
                            <strong>工业应用验证：</strong>基于真实露天矿和港口的实际应用需求，
                            设计工业级验证方案，确保研究成果的工程实用性和经济价值。
                        </div>
                        
                        <div class="innovation-grid">
                            <div class="innovation-box">
                                <div class="innovation-box-title">露天矿验证场景</div>
                                <ul class="tech-list">
                                    <li><strong>真实数据：</strong>实际露天矿LiDAR点云和作业记录数据</li>
                                    <li><strong>车辆建模：</strong>重载矿车精确动力学模型和约束参数</li>
                                    <li><strong>作业流程：</strong>装载点-运输路径-卸载点循环作业模式</li>
                                    <li><strong>环境约束：</strong>坡度限制、载重约束、天气影响因素</li>
                                </ul>
                            </div>
                            
                            <div class="innovation-box">
                                <div class="innovation-box-title">系统集成验证</div>
                                <ul class="tech-list">
                                    <li><strong>硬件集成：</strong>车辆控制系统、传感器网络、通信设备</li>
                                    <li><strong>软件兼容：</strong>与现有FMS、ERP系统的接口验证</li>
                                    <li><strong>网络验证：</strong>5G/Wi-Fi环境下的实时通信性能测试</li>
                                    <li><strong>安全验证：</strong>紧急制动、故障处理、人工接管机制</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="mathematical-formulation">
                            工业验证关键指标：
                            
                            生产效率指标：
                            - 产量提升率 = (新系统日产量 - 基线日产量) / 基线日产量
                            - 设备利用率 = 有效作业时间 / 总可用时间
                            - 平均运输周期时间 = 装载到卸载完成的平均时间
                            
                            经济效益指标：
                            - ROI = (年度效益增长 - 系统投资成本) / 系统投资成本
                            - 燃油节约率 = (基线燃耗 - 优化后燃耗) / 基线燃耗
                            - 人力成本节约 = 减少的操作员工成本
                            
                            安全性指标：
                            - 事故率 = 安全事件数 / 万小时作业时间
                            - 预警响应时间 = 危险检测到规避动作的平均延迟
                            - 紧急停车成功率 = 成功紧急停车 / 紧急情况总数
                            
                            可靠性指标：
                            - 系统可用率 = 正常运行时间 / 总运行时间
                            - 平均故障间隔时间 (MTBF)
                            - 平均修复时间 (MTTR)
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 7. Research Contributions -->
        <div class="section">
            <div class="section-title">7. 研究贡献与价值</div>
            <div class="section-content">
                <div class="subsection">
                    <div class="subsection-title">7.1 理论贡献</div>
                    <div class="subsection-content">
                        <div class="significance-grid">
                            <div class="significance-section significance-theory">
                                <div class="significance-section-title">算法理论贡献</div>
                                <div class="significance-text">
                                    <strong>V-Hybrid A*的Lifelong扩展理论：</strong>首次建立了V-Hybrid A*算法在lifelong场景下的理论框架，
                                    解决了从one-shot到lifelong的算法扩展问题，为非结构化环境下的持续规划提供了理论基础。<br><br>
                                    
                                    <strong>RHCR-V-Hybrid A*融合理论：</strong>建立了RHCR框架与V-Hybrid A*算法的有机融合理论，
                                    证明了组合算法在完整性、实时性、连续性方面的理论保证。
                                </div>
                            </div>
                            
                            <div class="significance-section significance-technical">
                                <div class="significance-section-title">技术方法贡献</div>
                                <div class="significance-text">
                                    <strong>动态优先级管理机制：</strong>提出了基于多因子的动态优先级计算方法，
                                    结合PIBT的优先级继承思想，实现了高效的冲突解耦和吞吐量优化。<br><br>
                                    
                                    <strong>窗口边界连续性保证：</strong>设计了完整的窗口边界处理机制，
                                    通过Warm Start和轨迹平滑技术确保lifelong规划的连续性和稳定性。
                                </div>
                            </div>
                            
                            <div class="significance-section significance-practical">
                                <div class="significance-section-title">应用价值贡献</div>
                                <div class="significance-text">
                                    <strong>工业场景适配：</strong>为露天矿、港口、仓储等非结构化工业环境
                                    提供了完整的lifelong多车协同解决方案，具有直接的产业应用价值。<br><br>
                                    
                                    <strong>工程实现框架：</strong>提供了从算法设计到系统实现的完整技术栈，
                                    为理论研究向工业应用转化提供了可行的技术路径。
                                </div>
                            </div>
                            
                            <div class="significance-section significance-future">
                                <div class="significance-section-title">发展前景</div>
                                <div class="significance-text">
                                    <strong>技术拓展前景：</strong>为非结构化环境下的多智能体系统研究开辟了新方向，
                                    可进一步扩展到无人机群、机器人协作等领域。<br><br>
                                    
                                    <strong>产业推广潜力：</strong>随着工业4.0和智能制造的发展，
                                    该技术有望在更广泛的工业场景中得到应用和推广。
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">7.2 预期影响与局限性</div>
                    <div class="subsection-content">
                        <div class="challenge-grid">
                            <div class="challenge-box">
                                <div class="challenge-title">技术局限性</div>
                                <strong>计算复杂度：</strong>V-Hybrid A*的高计算复杂度可能限制系统的可扩展性。<br>
                                <strong>应对：</strong>通过窗口分解、并行化、近似算法等技术降低复杂度。
                            </div>
                            
                            <div class="challenge-box">
                                <div class="challenge-title">环境假设限制</div>
                                <strong>双连通性要求：</strong>某些非结构化环境可能不满足双连通图假设。<br>
                                <strong>应对：</strong>设计图拓扑优化算法，通过虚拟节点确保连通性。
                            </div>
                            
                            <div class="challenge-box">
                                <div class="challenge-title">实时性挑战</div>
                                <strong>400ms时间限制：</strong>大规模场景下可能难以满足实时性要求。<br>
                                <strong>应对：</strong>设计自适应窗口调整和降级运行策略。
                            </div>
                            
                            <div class="challenge-box">
                                <div class="challenge-title">工程部署风险</div>
                                <strong>系统复杂性：</strong>多层架构增加了部署和维护的复杂性。<br>
                                <strong>应对：</strong>模块化设计，提供渐进式部署方案。
                            </div>
                        </div>
                        
                        <div class="highlight-box">
                            <div class="highlight-title">预期研究成果</div>
                            <strong>学术影响：</strong>预期在IEEE T-ITS、AAAI、ICRA等顶级期刊会议发表2-3篇高质量论文，
                            推动lifelong MAPF向非结构化环境应用的发展。<br><br>
                            <strong>技术成果：</strong>建立开源技术平台，包括算法实现、仿真环境、测试工具，
                            为学术界和工业界提供可复现的技术基础。<br><br>
                            <strong>应用成果：</strong>在露天矿等真实工业场景完成原型验证，
                            形成可推广的技术解决方案。
                        </div>
                    </div>
                </div>
                
                <div class="subsection">
                    <div class="subsection-title">7.3 未来研究方向</div>
                    <div class="subsection-content">
                        <div class="innovation-grid">
                            <div class="innovation-box">
                                <div class="innovation-box-title">算法优化方向</div>
                                <ul class="tech-list">
                                    <li>结合机器学习的自适应参数调整</li>
                                    <li>多目标优化的帕累托前沿求解</li>
                                    <li>分布式并行计算架构设计</li>
                                    <li>近似算法的理论分析与改进</li>
                                </ul>
                            </div>
                            
                            <div class="innovation-box">
                                <div class="innovation-box-title">应用拓展方向</div>
                                <ul class="tech-list">
                                    <li>异构车辆混合调度</li>
                                    <li>动态环境适应与预测</li>
                                    <li>人机协作场景扩展</li>
                                    <li>多层级决策体系构建</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>